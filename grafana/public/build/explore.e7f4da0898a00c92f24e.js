(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1480:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return f}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return y}),n.d(t,"h",function(){return E}),n.d(t,"i",function(){return S}),n.d(t,"k",function(){return k}),n.d(t,"l",function(){return T}),n.d(t,"m",function(){return O}),n.d(t,"n",function(){return L}),n.d(t,"o",function(){return I}),n.d(t,"p",function(){return R}),n.d(t,"q",function(){return q}),n.d(t,"r",function(){return D}),n.d(t,"c",function(){return P}),n.d(t,"j",function(){return Q});var a=n(1),r=n(2),o=n.n(r),s=n(62),i=n(106),l=n(64),c=n(27),u=n(83),p=n(41),d=n(1481),m=function(e,t){return function(n){n(Object(p.F)(a.a({exploreId:e},t))),n(_())}};function h(e,t){return function(n,a){var r=Object(l.h)(a().explore[e].queries,t);n(Object(p.b)({exploreId:e,index:t,query:r}))}}function g(e,t){var n=this;return function(r,o){return a.b(n,void 0,void 0,function(){var n,s,l,c;return a.d(this,function(a){switch(a.label){case 0:return[4,Object(i.a)().get(t)];case 1:return n=a.sent(),s=o().explore[e].datasourceInstance,l=o().explore[e].queries,[4,r(x(e,l,s,n))];case 2:a.sent(),r(Object(p.E)({exploreId:e,datasourceInstance:n})),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,r(C(e,n))];case 4:return a.sent(),[3,6];case 5:return c=a.sent(),console.error(c),[2];case 6:return r(k(e)),[2]}})})}}function f(e,t,n,r){return function(o,s){null===t&&(t=a.a({},Object(l.h)(s().explore[e].queries))),o(Object(p.c)({exploreId:e,query:t,index:n,override:r})),r&&o(k(e))}}function v(e,t){var n=t.height,a=t.width;return Object(p.d)({exploreId:e,height:n,width:a})}function b(e,t){return function(n){n(Object(p.e)({exploreId:e,range:t})),n(k(e))}}function y(e){return function(t){t(Object(p.w)({exploreId:e})),t(Object(p.f)({exploreId:e})),t(_())}}function E(e,t,n,r,o,s,l){var c=this;return function(u){return a.b(c,void 0,void 0,function(){var c,d,m,h;return a.d(this,function(a){switch(a.label){case 0:if(c=Object(i.a)().getExternal().map(function(e){return{value:e.name,name:e.name,meta:e.meta}}),u(Object(p.h)({exploreId:e,containerWidth:o,eventBridge:s,exploreDatasources:c,queries:n,range:r,ui:l})),!(c.length>=1))return[3,11];if(d=void 0,!t)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Object(i.a)().get(t)];case 2:return d=a.sent(),[3,4];case 3:return m=a.sent(),console.error(m),[3,4];case 4:return d?[3,6]:[4,Object(i.a)().get()];case 5:d=a.sent(),a.label=6;case 6:u(Object(p.E)({exploreId:e,datasourceInstance:d})),a.label=7;case 7:return a.trys.push([7,9,,10]),[4,u(C(e,d))];case 8:return a.sent(),[3,10];case 9:return h=a.sent(),console.error(h),[2];case 10:return u(k(e,!0)),[3,12];case 11:u(Object(p.j)({exploreId:e})),a.label=12;case 12:return[2]}})})}}var w=function(e,t){var n=t.meta.metrics,a=t.meta.logs,r=t.meta.tables,o=t.pluginExports.ExploreStartPage,i="grafana.explore.history."+t.meta.id,c=s.a.getObject(i,[]);return s.a.set(l.c,t.name),Object(p.l)({exploreId:e,StartPage:o,datasourceInstance:t,history:c,showingStartPage:Boolean(o),supportsGraph:n,supportsLogs:a,supportsTable:r})};function x(e,t,n,r){var o=this;return function(s){return a.b(o,void 0,void 0,function(){var o,i;return a.d(this,function(c){switch(c.label){case 0:return o=t,n.meta.id!==r.meta.id?[3,1]:(o=a.g(t),[3,4]);case 1:return r.importQueries?[4,r.importQueries(t,n.meta)]:[3,3];case 2:return o=c.sent(),[3,4];case 3:o=Object(l.g)(),c.label=4;case 4:return i=o.map(function(e,n){return a.a({},e,Object(l.h)(t))}),s(Object(p.n)({exploreId:e,queries:i})),[2]}})})}}function C(e,t){var n=this;return function(r,o){return a.b(n,void 0,void 0,function(){var n,s,i,l;return a.d(this,function(a){switch(a.label){case 0:n=t.name,r(Object(p.k)({exploreId:e,requestedDatasourceName:n})),s=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t.testDatasource()];case 2:return i=a.sent(),s="success"===i.status?null:i.message,[3,4];case 3:return l=a.sent(),s=l&&l.statusText||"Network error",[3,4];case 4:return s?(r(Object(p.i)({exploreId:e,error:s})),[2,Promise.reject(n+" loading failed")]):n!==o().explore[e].requestedDatasourceName?[2]:(t.init&&t.init(),n!==o().explore[e].requestedDatasourceName?[2]:(r(w(e,t)),[2,Promise.resolve()]))}})})}}function S(e,t,n,a){return function(r){r(Object(p.m)({exploreId:e,modification:t,index:n,modifier:a})),t.preventSubmit||r(k(e))}}function k(e,t){return void 0===t&&(t=!1),function(n,a){var r=a().explore[e],o=r.datasourceInstance,s=r.queries,i=r.showingLogs,c=r.showingGraph,u=r.showingTable,d=r.supportsGraph,m=r.supportsLogs,h=r.supportsTable,g=r.containerWidth;if(!Object(l.l)(s))return n(Object(p.f)({exploreId:e})),void n(_());var f=o.interval;n(Object(p.t)({exploreId:e})),(t||u)&&h&&n(N(e,"Table",{interval:f,format:"table",instant:!0,valueWithRefId:!0},function(e){return e[0]})),(t||c)&&d&&n(N(e,"Graph",{interval:f,format:"time_series",instant:!1,maxDataPoints:g},l.m)),(t||i)&&m&&n(N(e,"Logs",{interval:f,format:"logs"})),n(_())}}function N(e,t,n,r){var s=this;return function(i,c){return a.b(s,void 0,void 0,function(){var s,u,d,m,h,g,f,v,b=this;return a.d(this,function(y){return s=c().explore[e],u=s.datasourceInstance,d=s.eventBridge,m=s.queries,h=s.queryIntervals,g=s.range,f=s.scanning,v=u.meta.id,m.forEach(function(s,y){return a.b(b,void 0,void 0,function(){var b,E,w,x,C,S,k;return a.d(this,function(N){switch(N.label){case 0:b=Object(l.d)(s,y,t,n,g,h,f),i(Object(p.p)({exploreId:e,resultType:t,rowIndex:y,transaction:b})),N.label=1;case 1:return N.trys.push([1,3,,4]),E=Date.now(),[4,u.query(b.options)];case 2:return w=N.sent(),d.emit("data-received",w.data||[]),x=Date.now()-E,C=c().explore[e].queryTransactions,S=r?r(w.data,b,C):w.data,i(function(e,t,n,r,s,i){return function(c,u){var d=u().explore[e],m=d.datasourceInstance,h=d.history,g=d.queryTransactions,f=d.scanner,v=d.scanning;if(m.meta.id===i){var b=g.find(function(e){return e.id===t});if(b){var y;m.getQueryHints&&(y=m.getQueryHints(b.query,n));var E=g.map(function(e){return e.id===t?a.a({},e,{hints:y,latency:r,result:n,done:!0}):e}),w=Object(l.p)(h,i,s);if(c(Object(p.q)({exploreId:e,history:w,queryTransactions:E})),v)if(0===o.a.size(n)){if(!E.find(function(e){return e.scanning&&!e.done})){var x=f();c(Object(p.u)({exploreId:e,range:x}))}}else c(Object(p.w)({exploreId:e}))}}}}(e,b.id,S,x,m,v)),[3,4];case 3:return k=N.sent(),d.emit("data-error",k),i(function(e,t,n,r){return function(o,s){var i=s().explore[e],l=i.datasourceInstance,c=i.queryTransactions;if(l.meta.id===r&&!n.cancelled&&c.find(function(e){return e.id===t})){var u,d;if(console.error(n),n.data)if("string"==typeof n.data)u=n.data;else{if(!n.data.error)throw new Error("Could not handle error response");u=n.data.error,n.data.response&&(d=n.data.response)}else u=n.message?n.message:"string"==typeof n?n:"Unknown error during query transaction. Please check JS console logs.";var m=c.map(function(e){return e.id===t?a.a({},e,{error:u,errorDetails:d,done:!0}):e});o(Object(p.o)({exploreId:e,queryTransactions:m}))}}}(e,b.id,k,v)),[3,4];case 4:return[2]}})})}),[2]})})}}function T(e,t){return function(n){n(Object(p.v)({exploreId:e,scanner:t}));var a=t();n(Object(p.u)({exploreId:e,range:a}))}}function O(e,t){return function(n,r){var o=t.map(function(t){return a.a({},t,Object(l.h)(r().explore[e].queries))});n(Object(p.x)({exploreId:e,queries:o})),n(k(e))}}function L(e){return function(t){t(Object(p.y)({itemId:e})),t(_())}}function I(){return function(e,t){var n=t().explore[u.a.left],r=t().location.query[u.a.left],o=Object(l.n)(r),s=a.a({},n,{queryTransactions:[],queries:n.queries.slice(),exploreId:u.a.right,urlState:o});e(Object(p.z)({itemState:s})),e(_())}}function _(){return function(e,t){var n=t().explore,a=n.left,r=n.right,o=n.split,s={},i={datasource:a.datasourceInstance.name,queries:a.queries.map(l.f),range:a.range,ui:{showingGraph:a.showingGraph,showingLogs:a.showingLogs,showingTable:a.showingTable,dedupStrategy:a.dedupStrategy}};if(s.left=Object(l.o)(i,!0),o){var u={datasource:r.datasourceInstance.name,queries:r.queries.map(l.f),range:r.range,ui:{showingGraph:r.showingGraph,showingLogs:r.showingLogs,showingTable:r.showingTable,dedupStrategy:r.dedupStrategy}};s.right=Object(l.o)(u,!0)}e(Object(c.c)({query:s}))}}var j=function(e){return function(t,n){return function(a){var r,o=!n;switch(e.type){case p.A.type:r={showingGraph:!n};break;case p.C.type:r={showingLogs:!n};break;case p.D.type:r={showingTable:!n}}a(e({exploreId:t})),a(m(t,r)),o&&a(k(t))}}},R=j(p.A),q=j(p.C),D=j(p.D),P=function(e,t){return function(n){n(m(e,{dedupStrategy:t}))}};function Q(e){return function(t,n){var r=n().explore[e];if(r.initialized){var o=r.urlState,s=r.update,i=r.containerWidth,c=r.eventBridge,u=o.datasource,m=o.queries,h=o.range,g=o.ui,f=m.map(function(e){return a.a({},e,Object(l.h)(r.queries))}),v={from:Object(d.b)(h.from),to:Object(d.b)(h.to)};if(s.datasource){var b=Object(l.g)(m),y={from:Object(d.b)(h.from),to:Object(d.b)(h.to)};t(E(e,u,b,y,i,c,g))}else s.range&&t(Object(p.e)({exploreId:e,range:v})),s.ui&&t(Object(p.F)(a.a({},g,{exploreId:e}))),s.queries&&t(Object(p.x)({exploreId:e,queries:f})),(s.queries||s.ui||s.range)&&t(k(e))}}}},1481:function(e,t,n){"use strict";n.d(t,"b",function(){return m});var a=n(1),r=n(0),o=n.n(r),s=n(5),i=n.n(s),l=n(36),c=n(132),u=n(4),p="YYYY-MM-DD HH:mm:ss",d={from:"now-6h",to:"now"};function m(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),i.a.isMoment(e))return n?e.format(p):e;if(-1!==e.indexOf("now"))return e;var a=e;return isNaN(a)||(a=parseInt(a,10)),(a=t?i.a.utc(a):i()(a)).format(p)}var h=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChangeFrom=function(e){n.setState({fromRaw:e.target.value})},n.handleChangeTo=function(e){n.setState({toRaw:e.target.value})},n.handleClickApply=function(){var e,t=n.props.onChangeTime;n.setState(function(t){var a=n.state,r=a.toRaw,o=a.fromRaw;return e={from:l.parse(o,!1),to:l.parse(r,!0)},{isOpen:!1,rangeString:c.b(e)}},function(){t&&t(e)})},n.handleClickLeft=function(){return n.move(-1)},n.handleClickPicker=function(){n.setState(function(e){return{isOpen:!e.isOpen}})},n.handleClickRight=function(){return n.move(1)},n.handleClickRefresh=function(){},n.handleClickRelativeOption=function(e){var t=n.props.onChangeTime,a=c.b(e);n.setState({toRaw:e.to,fromRaw:e.from,isOpen:!1,rangeString:a},function(){t&&t(e)})},n.dropdownRef=function(e){n.dropdownEl=e},n.state={isOpen:t.isOpen,isUtc:t.isUtc,rangeString:"",fromRaw:"",toRaw:"",initialRange:d,refreshInterval:""},n}return a.c(t,e),t.getDerivedStateFromProps=function(e,t){if(t.initialRange&&t.initialRange===e.range)return t;var n=e.range?e.range.from:d.from,r=e.range?e.range.to:d.to,o=m(n,e.isUtc,!0),s=m(r,e.isUtc,!0),i={from:o,to:s};return a.a({},t,{fromRaw:o,toRaw:s,initialRange:e.range,rangeString:c.b(i)})},t.prototype.move=function(e,t){var n,a,r=this.props.onChangeTime,o=this.state,s=o.fromRaw,u=o.toRaw,d=l.parse(s,!1),m=l.parse(u,!0),h=t?1:2,g=(m.valueOf()-d.valueOf())/h;-1===e?(n=m.valueOf()-g,a=d.valueOf()-g):1===e?(n=m.valueOf()+g,a=d.valueOf()+g,n>Date.now()&&m.valueOf()<Date.now()&&(n=Date.now(),a=d.valueOf())):(n=m.valueOf(),a=d.valueOf());var f={from:i()(a),to:i()(n)},v={raw:f,from:f.from,to:f.to};return this.setState({rangeString:c.b(f),fromRaw:f.from.format(p),toRaw:f.to.format(p)},function(){r(v,t)}),f},t.prototype.getTimeOptions=function(){return c.c({},this.state.rangeString)},t.prototype.renderDropdown=function(){var e=this,t=this.state,n=t.fromRaw,a=t.isOpen,r=t.toRaw;if(!a)return null;var s=this.getTimeOptions();return o.a.createElement("div",{ref:this.dropdownRef,className:"gf-timepicker-dropdown"},o.a.createElement("div",{className:"popover-box"},o.a.createElement("div",{className:"popover-box__header"},o.a.createElement("span",{className:"popover-box__title"},"Quick ranges")),o.a.createElement("div",{className:"popover-box__body gf-timepicker-relative-section"},Object.keys(s).map(function(t){var n=s[t];return o.a.createElement("ul",{key:t},n.map(function(t){return o.a.createElement("li",{className:t.active?"active":"",key:t.display},o.a.createElement("a",{onClick:function(){return e.handleClickRelativeOption(t)}},t.display))}))}))),o.a.createElement("div",{className:"popover-box"},o.a.createElement("div",{className:"popover-box__header"},o.a.createElement("span",{className:"popover-box__title"},"Custom range")),o.a.createElement("div",{className:"popover-box__body gf-timepicker-absolute-section"},o.a.createElement("label",{className:"small"},"From:"),o.a.createElement("div",{className:"gf-form-inline"},o.a.createElement("div",{className:"gf-form max-width-28"},o.a.createElement(u.Input,{type:"text",className:"gf-form-input input-large timepicker-from",value:n,onChange:this.handleChangeFrom}))),o.a.createElement("label",{className:"small"},"To:"),o.a.createElement("div",{className:"gf-form-inline"},o.a.createElement("div",{className:"gf-form max-width-28"},o.a.createElement(u.Input,{type:"text",className:"gf-form-input input-large timepicker-to",value:r,onChange:this.handleChangeTo}))),o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"btn gf-form-btn btn-secondary",onClick:this.handleClickApply},"Apply")))))},t.prototype.render=function(){var e=this.state,t=e.isUtc,n=e.rangeString,a=e.refreshInterval;return o.a.createElement("div",{className:"timepicker"},o.a.createElement("div",{className:"navbar-buttons"},o.a.createElement("button",{className:"btn navbar-button navbar-button--tight timepicker-left",onClick:this.handleClickLeft},o.a.createElement("i",{className:"fa fa-chevron-left"})),o.a.createElement("button",{className:"btn navbar-button gf-timepicker-nav-btn",onClick:this.handleClickPicker},o.a.createElement("i",{className:"fa fa-clock-o"}),o.a.createElement("span",{className:"timepicker-rangestring"},n),t?o.a.createElement("span",{className:"gf-timepicker-utc"},"UTC"):null,a?o.a.createElement("span",{className:"text-warning"},"Â  Refresh every ",a):null),o.a.createElement("button",{className:"btn navbar-button navbar-button--tight timepicker-right",onClick:this.handleClickRight},o.a.createElement("i",{className:"fa fa-chevron-right"}))),this.renderDropdown())},t}(r.PureComponent);t.a=h},1482:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickToggle=function(){return t.props.onToggle(!t.props.isOpen)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.isOpen,n=t?"fa fa-caret-up":"fa fa-caret-down",a=e.loading?"explore-panel__loader explore-panel__loader--active":"explore-panel__loader";return o.a.createElement("div",{className:"explore-panel panel-container"},o.a.createElement("div",{className:"explore-panel__header",onClick:this.onClickToggle},o.a.createElement("div",{className:"explore-panel__header-buttons"},o.a.createElement("span",{className:n})),o.a.createElement("div",{className:"explore-panel__header-label"},this.props.label)),t&&o.a.createElement("div",{className:"explore-panel__body"},o.a.createElement("div",{className:a}),this.props.children))},t}(r.PureComponent);t.a=s},1483:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={error:null,errorInfo:null},n}return a.c(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},t.prototype.render=function(){return this.state.errorInfo?o.a.createElement("div",{className:"explore-container"},o.a.createElement("h3",null,"An unexpected error happened."),o.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),o.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children},t}(r.Component);t.a=s},1484:function(e,t,n){"use strict";var a=n(1),r=n(10),o=n.n(r),s=n(0),i=n.n(s),l=n(5),c=n.n(l),u=(n(216),n(418),n(417),n(419),n(36)),p=n(13),d=n.n(p),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickLabel=function(e){return t.props.onClickLabel(t.props.series,e)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.hidden,n=e.series,a=d()({"graph-legend-series-hidden":t});return i.a.createElement("div",{className:"graph-legend-series "+a},i.a.createElement("div",{className:"graph-legend-icon"},i.a.createElement("i",{className:"fa fa-minus pointer",style:{color:n.color}})),i.a.createElement("a",{className:"graph-legend-alias pointer",title:n.alias,onClick:this.onClickLabel},n.alias))},t}(s.PureComponent),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickLabel=function(e,n){(0,t.props.onToggleSeries)(e,!(n.ctrlKey||n.metaKey||n.shiftKey))},t}return a.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.data,a=t.hiddenSeries,r=n||[];return i.a.createElement("div",{className:"graph-legend ps"},r.map(function(t,n){return i.a.createElement(m,{hidden:a.has(t.alias),key:t.id+"-"+n,onClickLabel:e.onClickLabel,series:t})}))},t.defaultProps={onToggleSeries:function(){}},t}(s.PureComponent);function g(e,t,n){if(t&&n&&e){var a=n-t,r=a/e/1e3;return r<=45?"%H:%M:%S":r<=7200||a<=864e5?"%H:%M":r<=8e4?"%m/%d %H:%M":r<=2419200||a<=31536e6?"%m/%d":"%Y-%m"}return"%H:%M"}var f={legend:{show:!1},series:{lines:{linewidth:1,zero:!1},shadowSize:0},grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0},selection:{mode:"x",color:"#666"}},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dynamicOptions=null,t.state={hiddenSeries:new Set,showAllTimeSeries:!1},t.onPlotSelected=function(e,n){if(t.props.onChangeTime){var a={from:c()(n.xaxis.from),to:c()(n.xaxis.to)};t.props.onChangeTime(a)}},t.onShowAllTimeSeries=function(){t.setState({showAllTimeSeries:!0},t.draw)},t.onToggleSeries=function(e,n){t.setState(function(t,a){var r=a.data,o=a.onToggleSeries,s=t.hiddenSeries,i=s.size===new Set(r.map(function(e){return e.alias})).size-1,l=new Set;if(n)!s.has(e.alias)&&i||(l=new Set(r.filter(function(t){return t.alias!==e.alias}).map(function(e){return e.alias})));else{var c=new Set(r.map(function(e){return e.alias}));(l=function(e,t){for(var n=new Set,a=t.values();;){var r=a.next(),o=r.value;if(r.done)return n;e.has(o)&&n.add(o)}}(new Set(s),c)).has(e.alias)?l.delete(e.alias):l.add(e.alias)}return o&&o(e.alias,l),{hiddenSeries:l}},t.draw)},t}return a.c(t,e),t.prototype.getGraphData=function(){var e=this.props.data;return this.state.showAllTimeSeries?e:e.slice(0,20)},t.prototype.componentDidMount=function(){this.draw(),this.$el=o()("#"+this.props.id),this.$el.bind("plotselected",this.onPlotSelected)},t.prototype.componentDidUpdate=function(e,t){e.data===this.props.data&&e.range===this.props.range&&e.split===this.props.split&&e.height===this.props.height&&e.width===this.props.width&&function(e,t){if(e.size!==t.size)return!1;for(var n=e.values();;){var a=n.next(),r=a.value;if(a.done)return!0;if(!t.has(r))return!1}}(t.hiddenSeries,this.state.hiddenSeries)||this.draw()},t.prototype.componentWillUnmount=function(){this.$el.unbind("plotselected",this.onPlotSelected)},t.prototype.getDynamicOptions=function(){var e=this.props,t=e.range,n=(e.width||0)/100,a=t.from,r=t.to;c.a.isMoment(a)||(a=u.parse(a,!1)),c.a.isMoment(r)||(r=u.parse(r,!0));var o=a.valueOf(),s=r.valueOf();return{xaxis:{mode:"time",min:o,max:s,label:"Datetime",ticks:n,timezone:"browser",timeformat:g(n,o,s)}}},t.prototype.draw=function(){var e=this.props.userOptions,t=void 0===e?{}:e,n=this.state.hiddenSeries,r=this.getGraphData(),s=o()("#"+this.props.id),i=[{data:[[0,0]]}];r&&r.length>0&&(i=r.filter(function(e){return!n.has(e.alias)}).map(function(e){return{color:e.color,label:e.label,data:e.getFlotPairs("null")}})),this.dynamicOptions=this.getDynamicOptions();var l=a.a({},f,this.dynamicOptions,t);o.a.plot(s,i,l)},t.prototype.render=function(){var e=this.props,t=e.height,n=void 0===t?100:t,a=e.id,r=void 0===a?"graph":a,o=this.state.hiddenSeries,s=this.getGraphData();return i.a.createElement(i.a.Fragment,null,this.props.data&&this.props.data.length>20&&!this.state.showAllTimeSeries&&i.a.createElement("div",{className:"time-series-disclaimer"},i.a.createElement("i",{className:"fa fa-fw fa-warning disclaimer-icon"}),"Showing only 20 time series. ",i.a.createElement("span",{className:"show-all-time-series",onClick:this.onShowAllTimeSeries},"Show all "+this.props.data.length)),i.a.createElement("div",{id:r,className:"explore-graph",style:{height:n}}),i.a.createElement(h,{data:s,hiddenSeries:o,onToggleSeries:this.onToggleSeries}))},t}(s.PureComponent);t.a=v},1485:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),s=n(39),i=n(24),l=n(178),c=n(62),u=n(1486),p=n(1483),d=n(1487),m=n(1488),h=n(1489),g=n(1492),f=n(1481),v=n(1480),b=n(64),y=n(151),E=n(1494),w=n(41),x=function(e){function t(t){var n=e.call(this,t)||this;return n.getRef=function(e){n.el=e},n.onChangeTime=function(e,t){n.props.scanning&&!t&&n.onStopScanning(),n.props.changeTime(n.props.exploreId,e)},n.onClickExample=function(e){n.props.setQueries(n.props.exploreId,[e])},n.onClickLabel=function(e,t){n.onModifyQueries({type:"ADD_FILTER",key:e,value:t})},n.onModifyQueries=function(e,t){var a=n.props.datasourceInstance;if(a&&a.modifyQuery){n.props.modifyQueries(n.props.exploreId,e,t,function(e,t){return a.modifyQuery(e,t)})}},n.onResize=function(e){n.props.changeSize(n.props.exploreId,e)},n.onStartScanning=function(){var e=n.scanPreviousRange;n.props.scanStart(n.props.exploreId,e)},n.scanPreviousRange=function(){return n.timepickerRef.current.move(-1,!0)},n.onStopScanning=function(){n.props.scanStopAction({exploreId:n.props.exploreId})},n.refreshExplore=function(){var e=n.props,t=e.exploreId,a=e.update;(a.queries||a.ui||a.range||a.datasource)&&n.props.refreshExplore(t)},n.exploreEvents=new y.a,n.timepickerRef=o.a.createRef(),n}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.exploreId,n=e.urlState,a=e.initialized,r=n||{},o=r.datasource,s=r.queries,i=r.range,l=void 0===i?b.a:i,u=r.ui,p=void 0===u?b.b:u,d=o||c.a.get(b.c),m=Object(b.g)(s),h={from:Object(f.b)(l.from),to:Object(f.b)(l.to)},g=this.el?this.el.offsetWidth:0;a||this.props.initializeExplore(t,d,m,h,g,this.exploreEvents,p)},t.prototype.componentWillUnmount=function(){this.exploreEvents.removeAllListeners()},t.prototype.componentDidUpdate=function(e){this.refreshExplore()},t.prototype.render=function(){var e=this,t=this.props,n=t.StartPage,a=t.datasourceInstance,r=t.datasourceError,s=t.datasourceLoading,i=t.datasourceMissing,c=t.exploreId,f=t.showingStartPage,v=t.split,b=t.supportsGraph,y=t.supportsLogs,w=t.supportsTable,x=t.queryKeys,C=v?"explore explore-split":"explore";return o.a.createElement("div",{className:C,ref:this.getRef},o.a.createElement(E.a,{exploreId:c,timepickerRef:this.timepickerRef,onChangeTime:this.onChangeTime}),s?o.a.createElement("div",{className:"explore-container"},"Loading datasource..."):null,i?o.a.createElement("div",{className:"explore-container"},"Please add a datasource that supports Explore (e.g., Prometheus)."):null,r&&o.a.createElement("div",{className:"explore-container"},o.a.createElement(u.a,{message:"Error connecting to datasource: "+r})),a&&!r&&o.a.createElement("div",{className:"explore-container"},o.a.createElement(h.a,{exploreEvents:this.exploreEvents,exploreId:c,queryKeys:x}),o.a.createElement(l.a,{onResize:this.onResize,disableHeight:!0},function(t){var a=t.width;return 0===a?null:o.a.createElement("main",{className:"m-t-2",style:{width:a}},o.a.createElement(p.a,null,f&&o.a.createElement(n,{onClickExample:e.onClickExample}),!f&&o.a.createElement(o.a.Fragment,null,b&&!y&&o.a.createElement(d.a,{width:a,exploreId:c}),w&&o.a.createElement(g.a,{exploreId:c,onClickCell:e.onClickLabel}),y&&o.a.createElement(m.a,{width:a,exploreId:c,onChangeTime:e.onChangeTime,onClickLabel:e.onClickLabel,onStartScanning:e.onStartScanning,onStopScanning:e.onStopScanning}))))})))},t}(o.a.PureComponent);var C={changeSize:v.e,changeTime:v.f,initializeExplore:v.h,modifyQueries:v.i,refreshExplore:v.j,scanStart:v.l,scanStopAction:w.w,setQueries:v.m};t.a=Object(s.hot)(e)(Object(i.b)(function(e,t){var n=t.exploreId,a=e.explore,r=a.split,o=a[n];return{StartPage:o.StartPage,datasourceError:o.datasourceError,datasourceInstance:o.datasourceInstance,datasourceLoading:o.datasourceLoading,datasourceMissing:o.datasourceMissing,initialized:o.initialized,range:o.range,showingStartPage:o.showingStartPage,split:r,supportsGraph:o.supportsGraph,supportsLogs:o.supportsLogs,supportsTable:o.supportsTable,queryKeys:o.queryKeys,urlState:o.urlState,update:o.update}},C)(x))}).call(this,n(77)(e))},1486:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(0),r=n.n(a),o=function(e){var t=e.message;return r.a.createElement("div",{className:"gf-form-group section"},r.a.createElement("div",{className:"alert-error alert"},r.a.createElement("div",{className:"alert-icon"},r.a.createElement("i",{className:"fa fa-exclamation-triangle"})),r.a.createElement("div",{className:"alert-body"},r.a.createElement("div",{className:"alert-title"},t))))}},1487:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),s=n(39),i=n(24),l=n(1480),c=n(1484),u=n(1482),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickGraphButton=function(){t.props.toggleGraph(t.props.exploreId,t.props.showingGraph)},t.onChangeTime=function(e){t.props.changeTime(t.props.exploreId,e)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.exploreId,n=e.graphResult,a=e.loading,r=e.showingGraph,s=e.showingTable,i=e.range,l=e.split,p=e.width,d=r&&s?200:400;return n?o.a.createElement(u.a,{label:"Graph",isOpen:r,loading:a,onToggle:this.onClickGraphButton},o.a.createElement(c.a,{data:n,height:d,id:"explore-graph-"+t,onChangeTime:this.onChangeTime,range:i,split:l,width:p})):null},t}(r.PureComponent);var d={toggleGraph:l.p,changeTime:l.f};t.a=Object(s.hot)(e)(Object(i.b)(function(e,t){var n=t.exploreId,a=e.explore,r=a.split,o=a[n],s=o.graphResult,i=o.queryTransactions,l=o.range,c=o.showingGraph,u=o.showingTable;return{graphResult:s,loading:i.some(function(e){return"Graph"===e.resultType&&!e.done}),range:l,showingGraph:c,showingTable:u,split:r}},d)(p))}).call(this,n(77)(e))},1488:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),s=n(39),i=n(24),l=n(114),c=n(1480),u=n(1495),p=n(1482),d=n(41),m=n(1496),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickLogsButton=function(){t.props.toggleLogs(t.props.exploreId,t.props.showingLogs)},t.handleDedupStrategyChange=function(e){t.props.changeDedupStrategy(t.props.exploreId,e)},t.hangleToggleLogLevel=function(e){var n=t.props.exploreId;t.props.toggleLogLevelAction({exploreId:n,hiddenLogLevels:e})},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.exploreId,n=e.loading,a=e.logsHighlighterExpressions,r=e.logsResult,s=e.dedupedResult,i=e.onChangeTime,c=e.onClickLabel,d=e.onStartScanning,m=e.onStopScanning,h=e.range,g=e.showingLogs,f=e.scanning,v=e.scanRange,b=e.width,y=e.hiddenLogLevels;return o.a.createElement(p.a,{label:"Logs",loading:n,isOpen:g,onToggle:this.onClickLogsButton},o.a.createElement(u.a,{dedupStrategy:this.props.dedupStrategy||l.c.none,data:r,dedupedData:s,exploreId:t,key:r&&r.id,highlighterExpressions:a,loading:n,onChangeTime:i,onClickLabel:c,onStartScanning:d,onStopScanning:m,onDedupStrategyChange:this.handleDedupStrategyChange,onToggleLogLevel:this.hangleToggleLogLevel,range:h,scanning:f,scanRange:v,width:b,hiddenLogLevels:y}))},t}(r.PureComponent);var g={toggleLogs:c.q,changeDedupStrategy:c.c,toggleLogLevelAction:d.B};t.a=Object(s.hot)(e)(Object(i.b)(function(e,t){var n=t.exploreId,a=e.explore[n],r=a.logsHighlighterExpressions,o=a.logsResult,s=a.queryTransactions,i=a.scanning,l=a.scanRange,c=a.range,u=s.some(function(e){return"Logs"===e.resultType&&!e.done}),p=Object(m.b)(a);return{loading:u,logsHighlighterExpressions:r,logsResult:o,scanning:i,scanRange:l,showingLogs:p.showingLogs,range:c,dedupStrategy:p.dedupStrategy,hiddenLogLevels:new Set(a.hiddenLogLevels),dedupedResult:Object(m.a)(a)}},g)(h))}).call(this,n(77)(e))},1489:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),s=n(1490),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=void 0===t?"":t,a=e.exploreEvents,r=e.exploreId,i=e.queryKeys;return o.a.createElement("div",{className:n},i.map(function(e,t){return o.a.createElement(s.a,{key:e,exploreEvents:a,exploreId:r,index:t})}))},t}(r.PureComponent);t.a=i},1490:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),s=n(2),i=n.n(s),l=n(39),c=n(24),u=n(1491),p=n(1497),d=n(1480),m=n(41);var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onExecuteQuery=function(){var e=t.props.exploreId;t.props.runQueries(e)},t.onChangeQuery=function(e,n){var a=t.props,r=a.datasourceInstance,o=a.exploreId,s=a.index;t.props.changeQuery(o,e,s,n),e&&!n&&r.getHighlighterExpression&&0===s&&t.updateLogsHighlights(e)},t.onClickAddButton=function(){var e=t.props,n=e.exploreId,a=e.index;t.props.addQueryRow(n,a)},t.onClickClearButton=function(){t.onChangeQuery(null,!0)},t.onClickHintFix=function(e){var n=t.props,a=n.datasourceInstance,r=n.exploreId,o=n.index;if(a&&a.modifyQuery){t.props.modifyQueries(r,e,o,function(e,t){return a.modifyQuery(e,t)})}},t.onClickRemoveButton=function(){var e=t.props,n=e.exploreId,a=e.index;t.props.removeQueryRowAction({exploreId:n,index:a})},t.updateLogsHighlights=i.a.debounce(function(e){var n=t.props.datasourceInstance;if(n.getHighlighterExpression){var a=t.props.exploreId,r=[n.getHighlighterExpression(e)];t.props.highlightLogsExpressionAction({exploreId:a,expressions:r})}},500),t}return a.c(t,e),t.prototype.componentWillUnmount=function(){console.log("QueryRow will unmount")},t.prototype.render=function(){var e=this.props,t=e.datasourceInstance,n=e.history,a=e.index,r=e.query,s=e.queryTransactions,i=e.exploreEvents,l=e.range,c=s.filter(function(e){return e.rowIndex===a}),d=c.find(function(e){return void 0!==e.error}),m=function(e){var t=e.find(function(e){return e.hints&&e.hints.length>0});if(t)return t.hints[0]}(c),h=d?d.error:null,g=t.pluginExports.ExploreQueryField;return o.a.createElement("div",{className:"query-row"},o.a.createElement("div",{className:"query-row-status"},o.a.createElement(p.a,{transactions:c})),o.a.createElement("div",{className:"query-row-field flex-shrink-1"},g?o.a.createElement(g,{datasource:t,query:r,error:h,hint:m,history:n,onExecuteQuery:this.onExecuteQuery,onExecuteHint:this.onClickHintFix,onQueryChange:this.onChangeQuery}):o.a.createElement(u.a,{datasource:t,error:h,onQueryChange:this.onChangeQuery,onExecuteQuery:this.onExecuteQuery,initialQuery:r,exploreEvents:i,range:l})),o.a.createElement("div",{className:"gf-form-inline flex-shrink-0"},o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"gf-form-label gf-form-label--btn",onClick:this.onClickClearButton},o.a.createElement("i",{className:"fa fa-times"}))),o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"gf-form-label gf-form-label--btn",onClick:this.onClickAddButton},o.a.createElement("i",{className:"fa fa-plus"}))),o.a.createElement("div",{className:"gf-form"},o.a.createElement("button",{className:"gf-form-label gf-form-label--btn",onClick:this.onClickRemoveButton},o.a.createElement("i",{className:"fa fa-minus"})))))},t}(r.PureComponent);var g={addQueryRow:d.a,changeQuery:d.d,highlightLogsExpressionAction:m.g,modifyQueries:d.i,removeQueryRowAction:m.r,runQueries:d.k};t.a=Object(l.hot)(e)(Object(c.b)(function(e,t){var n=t.exploreId,a=t.index,r=e.explore[n],o=r.datasourceInstance,s=r.history,i=r.queries,l=r.queryTransactions,c=r.range;return{datasourceInstance:o,history:s,query:i[a],queryTransactions:l,range:c}},g)(h))}).call(this,n(77)(e))},1491:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),s=n(65),i=n(142),l=(n(117),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.componentDidMount=function(){return a.b(this,void 0,void 0,function(){var e,t,n,r,o,i,l,c,u=this;return a.d(this,function(p){return this.element?(e=this.props,t=e.datasource,n=e.initialQuery,r=e.exploreEvents,o=e.range,this.initTimeSrv(o),i=Object(s.a)(),'<plugin-component type="query-ctrl"> </plugin-component>',l=a.a({datasource:t.name},n),c={ctrl:{datasource:t,target:l,refresh:function(){u.props.onQueryChange(l),u.props.onExecuteQuery()},onQueryChange:function(){u.props.onQueryChange(l)},events:r,panel:{datasource:t,targets:[l]},dashboard:{}}},this.component=i.load(this.element,c,'<plugin-component type="query-ctrl"> </plugin-component>'),this.props.onQueryChange(l),[2]):[2]})})},t.prototype.componentWillUnmount=function(){this.component&&this.component.destroy()},t.prototype.initTimeSrv=function(e){Object(i.a)().init({time:e,refresh:!1,getTimezone:function(){return"utc"},timeRangeUpdated:function(){return console.log("refreshDashboard!")}})},t.prototype.render=function(){var e=this;return o.a.createElement("div",{className:"gf-form-query",ref:function(t){return e.element=t},style:{width:"100%"}})},t}(r.PureComponent));t.a=l},1492:function(e,t,n){"use strict";(function(e){var a=n(1),r=n(0),o=n.n(r),s=n(39),i=n(24),l=n(1480),c=n(1493),u=n(1482),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickTableButton=function(){t.props.toggleTable(t.props.exploreId,t.props.showingTable)},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.loading,n=e.onClickCell,a=e.showingTable,r=e.tableResult;return r?o.a.createElement(u.a,{label:"Table",loading:t,isOpen:a,onToggle:this.onClickTableButton},o.a.createElement(c.a,{data:r,loading:t,onClickCell:n})):null},t}(r.PureComponent);var d={toggleTable:l.r};t.a=Object(s.hot)(e)(Object(i.b)(function(e,t){var n=t.exploreId,a=e.explore[n],r=a.queryTransactions,o=a.showingTable,s=a.tableResult;return{loading:r.some(function(e){return"Table"===e.resultType&&!e.done}),showingTable:o,tableResult:s}},d)(p))}).call(this,n(77)(e))},1493:function(e,t,n){"use strict";var a=n(1),r=n(2),o=n.n(r),s=n(0),i=n.n(s),l=n(1478),c=new(n(95).a),u=/^[Vv]alue #\d+/;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getCellProps=function(e,n,a){return{onClick:function(e){if(e.target&&"link"===e.target.className){var r=a.Header,o=n.row[r];t.props.onClickCell(r,o)}}}},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.data,n=e.loading,a=t||c,r=a.columns.map(function(e){return e.text}),s=a.columns.map(function(e){var t=e.filterable,n=e.text;return{Header:function(){return i.a.createElement("span",{title:n},n)},accessor:n,className:u.test(n)?"text-right":"",show:"Time"!==n,Cell:function(e){return i.a.createElement("span",{className:t?"link":"",title:n+": "+e.value},e.value)}}}),p=t?"The queries returned no data for a table.":"";return i.a.createElement(l.a,{columns:s,data:a.rows,getTdProps:this.getCellProps,loading:n,minRows:0,noDataText:p,resolveData:function(e){return function(e,t){return e.map(function(e){return o.a.zipObject(t,e)})}(e,r)},showPagination:Boolean(t)})},t}(s.PureComponent);t.a=p},1494:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var a,r=n(1),o=n(0),s=n.n(o),i=n(24),l=n(39),c=n(397),u=n(1480),p=n(1481),d=n(689);!function(e){e.left="left",e.right="right"}(a||(a={}));var m=function(e){var t={iconSide:a.left},n=r.a({},e,{defaultOptions:t}),o=n.title,i=n.onClick,l=n.buttonClassName,c=n.iconClassName,u=n.splitted,p=n.iconSide;return s.a.createElement("button",{className:"btn navbar-button "+(l||""),onClick:i},c&&p===a.left?s.a.createElement("i",{className:c+" icon-margin-right"}):null,s.a.createElement("span",{className:"btn-title"},u?"":o),c&&p===a.right?s.a.createElement("i",{className:c+" icon-margin-left"}):null)},h=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeDatasource=function(e){return r.b(n,void 0,void 0,function(){return r.d(this,function(t){return this.props.changeDatasource(this.props.exploreId,e.value),[2]})})},n.onClearAll=function(){n.props.clearAll(n.props.exploreId)},n.onRunQuery=function(){n.props.runQuery(n.props.exploreId)},n.onCloseTimePicker=function(){n.props.timepickerRef.current.setState({isOpen:!1})},n}return r.c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.datasourceMissing,r=t.exploreDatasources,o=t.exploreId,i=t.loading,l=t.range,u=t.selectedDatasource,h=t.splitted,g=t.timepickerRef;return s.a.createElement("div",{className:h?"explore-toolbar splitted":"explore-toolbar"},s.a.createElement("div",{className:"explore-toolbar-item"},s.a.createElement("div",{className:"explore-toolbar-header"},s.a.createElement("div",{className:"explore-toolbar-header-title"},"left"===o&&s.a.createElement("span",{className:"navbar-page-btn"},s.a.createElement("i",{className:"gicon gicon-explore"}),"Explore")),h&&s.a.createElement("a",{className:"explore-toolbar-header-close",onClick:function(){return e.props.closeSplit(o)}},s.a.createElement("i",{className:"fa fa-times fa-fw"})))),s.a.createElement("div",{className:"explore-toolbar-item"},s.a.createElement("div",{className:"explore-toolbar-content"},n?null:s.a.createElement("div",{className:"explore-toolbar-content-item"},s.a.createElement("div",{className:"datasource-picker"},s.a.createElement(c.a,{onChange:this.onChangeDatasource,datasources:r,current:u}))),"left"!==o||h?null:s.a.createElement("div",{className:"explore-toolbar-content-item"},m({splitted:h,title:"Split",onClick:this.props.split,iconClassName:"fa fa-fw fa-columns icon-margin-right",iconSide:a.left})),s.a.createElement("div",{className:"explore-toolbar-content-item timepicker"},s.a.createElement(d.a,{onClick:this.onCloseTimePicker},s.a.createElement(p.a,{ref:g,range:l,onChangeTime:this.props.onChangeTime}))),s.a.createElement("div",{className:"explore-toolbar-content-item"},s.a.createElement("button",{className:"btn navbar-button navbar-button--no-icon",onClick:this.onClearAll},"Clear All")),s.a.createElement("div",{className:"explore-toolbar-content-item"},m({splitted:h,title:"Run Query",onClick:this.onRunQuery,buttonClassName:"navbar-button--secondary",iconClassName:i?"fa fa-spinner fa-fw fa-spin run-icon":"fa fa-level-down fa-fw run-icon",iconSide:a.right})))))},t}(o.PureComponent),g={changeDatasource:u.b,clearAll:u.g,runQuery:u.k,closeSplit:u.n,split:u.o},f=Object(l.hot)(e)(Object(i.b)(function(e,t){var n=t.exploreId,a=e.explore.split,r=e.explore[n],o=r.datasourceInstance,s=r.datasourceMissing,i=r.exploreDatasources,l=r.queryTransactions,c=r.range,u=o?i.find(function(e){return e.name===o.name}):void 0;return{datasourceMissing:s,exploreDatasources:i,loading:l.some(function(e){return!e.done}),range:c,selectedDatasource:u,splitted:a}},g)(h))}).call(this,n(77)(e))},1495:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),s=n(132),i=n(4),l=n(81),c=n(114),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.label,a=e.transparent;return o.a.createElement("div",{className:"gf-form"},n&&o.a.createElement("label",{className:"gf-form-label "+(a?"gf-form-label--transparent":"")},n),o.a.createElement("div",{className:"toggle-button-group "+(a?"toggle-button-group--transparent":"")},t))},t}(r.PureComponent),p=function(e){var t=e.children,n=e.selected,a=e.className,r=void 0===a?"":a,s=e.value,l=void 0===s?null:s,c=e.tooltip,u=e.onChange,p="btn "+r+" "+(n?"active":""),d=o.a.createElement("button",{className:p,onClick:function(e){e.stopPropagation(),u&&u(l)}},o.a.createElement("span",null,t));return c?o.a.createElement(i.Tooltip,{content:c,placement:"bottom"},d):d},d=n(1484),m=n(13),h=n.n(m);function g(e){var t=e.active,n=e.count,a=e.proportion,r=e.value,s=Math.round(100*a)+"%",i={width:s},l=h()("logs-stats-row",{"logs-stats-row--active":t});return o.a.createElement("div",{className:l},o.a.createElement("div",{className:"logs-stats-row__label"},o.a.createElement("div",{className:"logs-stats-row__value",title:r},r),o.a.createElement("div",{className:"logs-stats-row__count"},n),o.a.createElement("div",{className:"logs-stats-row__percent"},s)),o.a.createElement("div",{className:"logs-stats-row__bar"},o.a.createElement("div",{className:"logs-stats-row__innerbar",style:i})))}var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.rowCount,r=e.stats,s=e.value,i=e.onClickClose,l=r.slice(0,5),c=l.find(function(e){return e.value===s}),u=r.slice(5),p=!c;p&&(c=u.find(function(e){return e.value===s}),u=u.filter(function(e){return e.value!==s}));var d=u.reduce(function(e,t){return e+t.count},0),m=l.reduce(function(e,t){return e+t.count},0)+d,h=d/m;return o.a.createElement("div",{className:"logs-stats"},o.a.createElement("div",{className:"logs-stats__header"},o.a.createElement("span",{className:"logs-stats__title"},t,": ",m," of ",n," rows have that label"),o.a.createElement("span",{className:"logs-stats__close fa fa-remove",onClick:i})),o.a.createElement("div",{className:"logs-stats__body"},l.map(function(e){return o.a.createElement(g,a.a({key:e.value},e,{active:e.value===s}))}),p&&c&&o.a.createElement(g,a.a({key:c.value},c,{active:!0})),d>0&&o.a.createElement(g,{key:"__OTHERS__",count:d,value:"Other",proportion:h})))},t}(r.PureComponent),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={stats:null,showStats:!1},t.onClickClose=function(){t.setState({showStats:!1})},t.onClickLabel=function(){var e=t.props,n=e.onClickLabel,a=e.label,r=e.value;n&&n(a,r)},t.onClickStats=function(){t.setState(function(e){if(e.showStats)return{showStats:!1,stats:null};var n=t.props.getRows();return{showStats:!0,stats:Object(c.f)(n,t.props.label)}})},t}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.getRows,n=e.label,a=e.plain,r=e.value,s=this.state,i=s.showStats,l=s.stats,c=n+": "+r;return o.a.createElement("span",{className:"logs-label"},o.a.createElement("span",{className:"logs-label__value",title:c},r),!a&&o.a.createElement("span",{title:"Filter for label",onClick:this.onClickLabel,className:"logs-label__icon fa fa-search-plus"}),!a&&t&&o.a.createElement("span",{onClick:this.onClickStats,className:"logs-label__icon fa fa-signal"}),i&&o.a.createElement("span",{className:"logs-label__stats"},o.a.createElement(f,{stats:l,rowCount:t().length,label:n,value:r,onClickClose:this.onClickClose})))},t}(r.PureComponent),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props,t=e.getRows,n=e.labels,a=e.onClickLabel,r=e.plain;return o.a.createElement("span",{className:"logs-labels"},Object.keys(n).map(function(e){return o.a.createElement(v,{key:e,getRows:t,label:e,value:n[e],plain:r,onClickLabel:a})}))},t}(r.PureComponent),y=n(2),E=n.n(y),w=n(286),x=n.n(w),C=n(204),S=n(661);var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={chunks:[],prevValue:""},t}return a.c(t,e),t.getDerivedStateFromProps=function(e,t){return e.value===t.prevValue?null:{chunks:S.a.parse(e.value).spans.map(function(e){return e.css?{style:(t=e.css,t.split(/;\s*/).reduce(function(e,t){var n=t.match(/([^:\s]+)\s*:\s*(.+)/);return n&&n[1]&&n[2]&&(e[n[1].replace(/-(a-z)/g,function(e,t){return t.toUpperCase()})]=n[2]),e},{})),text:e.text}:{text:e.text};var t}),prevValue:e.value}},t.prototype.render=function(){return this.state.chunks.map(function(e,t){return e.style?o.a.createElement("span",{key:t,style:e.style},e.text):e.text})},t}(r.PureComponent),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={fieldCount:0,fieldLabel:null,fieldStats:null,fieldValue:null,parsed:!1,parser:void 0,parsedFieldHighlights:[],showFieldStats:!1},t.onClickClose=function(){t.setState({showFieldStats:!1})},t.onClickHighlight=function(e){var n=t.props.getRows,a=t.state.parser,r=n(),o=a.getLabelFromField(e),s=a.getValueFromField(e),i=a.buildMatcher(o),l=Object(c.e)(r,i),u=l.reduce(function(e,t){return e+t.count},0);t.setState({fieldCount:u,fieldLabel:o,fieldStats:l,fieldValue:s,showFieldStats:!0})},t.onMouseOverMessage=function(){t.mouseMessageTimer=setTimeout(t.parseMessage,500)},t.onMouseOutMessage=function(){clearTimeout(t.mouseMessageTimer),t.setState({parsed:!1})},t.parseMessage=function(){if(!t.state.parsed){var e=t.props.row,n=Object(c.i)(e.entry);if(n){var a=n.getFields(t.props.row.entry);t.setState({parsedFieldHighlights:a,parsed:!0,parser:n})}}},t}return a.c(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this.mouseMessageTimer)},t.prototype.render=function(){var e,t=this.props,n=t.getRows,a=t.highlighterExpressions,r=t.onClickLabel,s=t.row,i=t.showDuplicates,l=t.showLabels,c=t.showLocalTime,u=t.showUtc,p=this.state,d=p.fieldCount,m=p.fieldLabel,g=p.fieldStats,v=p.fieldValue,y=p.parsed,w=p.parsedFieldHighlights,S=p.showFieldStats,N=s.entry,T=s.hasAnsi,O=s.raw,L=a&&!E.a.isEqual(a,s.searchWords),I=L?a:s.searchWords,_=I&&I.length>0&&I[0].length>0,j=h()("logs-row__match-highlight",{"logs-row__match-highlight--preview":L});return o.a.createElement("div",{className:"logs-row"},i&&o.a.createElement("div",{className:"logs-row__duplicates"},s.duplicates>0?s.duplicates+1+"x":null),o.a.createElement("div",{className:s.logLevel?"logs-row__level logs-row__level--"+s.logLevel:""}),u&&o.a.createElement("div",{className:"logs-row__time",title:"Local: "+s.timeLocal+" ("+s.timeFromNow+")"},s.timestamp),c&&o.a.createElement("div",{className:"logs-row__localtime",title:s.timestamp+" ("+s.timeFromNow+")"},s.timeLocal),l&&o.a.createElement("div",{className:"logs-row__labels"},o.a.createElement(b,{getRows:n,labels:s.uniqueLabels,onClickLabel:r})),o.a.createElement("div",{className:"logs-row__message",onMouseEnter:this.onMouseOverMessage,onMouseLeave:this.onMouseOutMessage},y&&o.a.createElement(x.a,{autoEscape:!0,highlightTag:(e=this.onClickHighlight,function(t){return o.a.createElement("span",{className:t.className,style:t.style},t.children,o.a.createElement("span",{className:"logs-row__field-highlight--icon fa fa-signal",onClick:function(){return e(t.children)}}))}),textToHighlight:N,searchWords:w,highlightClassName:"logs-row__field-highlight"}),!y&&_&&o.a.createElement(x.a,{textToHighlight:N,searchWords:I,findChunks:C.a,highlightClassName:j}),T&&!y&&!_&&o.a.createElement(k,{value:O}),!T&&!y&&!_&&N,S&&o.a.createElement("div",{className:"logs-row__stats"},o.a.createElement(f,{stats:g,label:m,value:v,onClickClose:this.onClickClose,rowCount:d}))))},t}(r.PureComponent),T={series:{stack:!0,bars:{show:!0,lineWidth:5}},yaxis:{tickDecimals:0}};var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={deferLogs:!0,renderAll:!1,showLabels:!1,showLocalTime:!0,showUtc:!1},t.onChangeDedup=function(e){var n=t.props.onDedupStrategyChange;return t.props.dedupStrategy===e?n(c.c.none):n(e)},t.onChangeLabels=function(e){var n=e.target;t.setState({showLabels:n.checked})},t.onChangeLocalTime=function(e){var n=e.target;t.setState({showLocalTime:n.checked})},t.onChangeUtc=function(e){var n=e.target;t.setState({showUtc:n.checked})},t.onToggleLogLevel=function(e,n){var a=new Set(Array.from(n).map(function(e){return c.a[e]}));t.props.onToggleLogLevel(a)},t.onClickScan=function(e){e.preventDefault(),t.props.onStartScanning()},t.onClickStopScan=function(e){e.preventDefault(),t.props.onStopScanning()},t}return a.c(t,e),t.prototype.componentDidMount=function(){var e=this;if(this.state.deferLogs){var t=this.props.data,n=t&&t.rows?t.rows.length:0,a=n<=200;this.deferLogsTimer=setTimeout(function(){return e.setState({deferLogs:!1,renderAll:a})},n)}},t.prototype.componentDidUpdate=function(e,t){var n=this;!t.deferLogs||this.state.deferLogs||this.state.renderAll||(this.renderAllTimer=setTimeout(function(){return n.setState({renderAll:!0})},2e3))},t.prototype.componentWillUnmount=function(){clearTimeout(this.deferLogsTimer),clearTimeout(this.renderAllTimer)},t.prototype.render=function(){var e=this,t=this.props,n=t.data,r=t.exploreId,m=t.highlighterExpressions,h=t.loading,g=void 0!==h&&h,f=t.onClickLabel,v=t.range,y=t.scanning,E=t.scanRange,w=t.width,x=t.dedupedData;if(!n)return null;var C=this.state,S=C.deferLogs,k=C.renderAll,O=C.showLabels,L=C.showLocalTime,I=C.showUtc,_=this.props.dedupStrategy,j=n&&n.rows&&n.rows.length>0,R=j&&x.hasUniqueLabels,q=x.rows.reduce(function(e,t){return e+t.duplicates},0),D=_!==c.c.none&&q>0,P=a.g(n.meta);_!==c.c.none&&P.push({label:"Dedup count",value:q,kind:c.d.Number});var Q=x.rows,M=Q.slice(0,100),A=Q.slice(100),F=E?"Scanning "+s.b(E):"Scanning...",H=function(){return Q},U=n.series.map(function(e){return new l.a(e)});return o.a.createElement("div",{className:"logs-panel"},o.a.createElement("div",{className:"logs-panel-graph"},o.a.createElement(d.a,{data:U,height:100,width:w,range:v,id:"explore-logs-graph-"+r,onChangeTime:this.props.onChangeTime,onToggleSeries:this.onToggleLogLevel,userOptions:T})),o.a.createElement("div",{className:"logs-panel-options"},o.a.createElement("div",{className:"logs-panel-controls"},o.a.createElement(i.Switch,{label:"Timestamp",checked:I,onChange:this.onChangeUtc,transparent:!0}),o.a.createElement(i.Switch,{label:"Local time",checked:L,onChange:this.onChangeLocalTime,transparent:!0}),o.a.createElement(i.Switch,{label:"Labels",checked:O,onChange:this.onChangeLabels,transparent:!0}),o.a.createElement(u,{label:"Dedup",transparent:!0},Object.keys(c.c).map(function(t,n){return o.a.createElement(p,{key:n,value:t,onChange:e.onChangeDedup,selected:_===t,tooltip:c.b[t]},t)})))),j&&P&&o.a.createElement("div",{className:"logs-panel-meta"},P.map(function(e){return o.a.createElement("div",{className:"logs-panel-meta__item",key:e.label},o.a.createElement("span",{className:"logs-panel-meta__label"},e.label,":"),o.a.createElement("span",{className:"logs-panel-meta__value"},(t=e.value,e.kind===c.d.LabelsMap?o.a.createElement("span",{className:"logs-meta-item__labels"},o.a.createElement(b,{labels:t,plain:!0})):t)));var t})),o.a.createElement("div",{className:"logs-rows"},j&&!S&&M.map(function(e){return o.a.createElement(N,{key:e.key+e.duplicates,getRows:H,highlighterExpressions:m,row:e,showDuplicates:D,showLabels:O&&R,showLocalTime:L,showUtc:I,onClickLabel:f})}),j&&!S&&k&&A.map(function(e){return o.a.createElement(N,{key:e.key+e.duplicates,getRows:H,row:e,showDuplicates:D,showLabels:O&&R,showLocalTime:L,showUtc:I,onClickLabel:f})}),j&&S&&o.a.createElement("span",null,"Rendering ",x.rows.length," rows...")),!g&&!j&&!y&&o.a.createElement("div",{className:"logs-panel-nodata"},"No logs found.",o.a.createElement("a",{className:"link",onClick:this.onClickScan},"Scan for older logs")),y&&o.a.createElement("div",{className:"logs-panel-nodata"},o.a.createElement("span",null,F),o.a.createElement("a",{className:"link",onClick:this.onClickStopScan},"Stop scan")))},t}(r.PureComponent);t.a=O},1496:function(e,t,n){"use strict";var a=n(2),r=n(1477),o=Object(r.a)(a.memoize,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return e+"-"+JSON.stringify(t)},"")}),s=n(114);n.d(t,"b",function(){return i}),n.d(t,"a",function(){return l});var i=function(e){return{showingGraph:e.showingGraph,showingLogs:e.showingLogs,showingTable:e.showingTable,showingStartPage:e.showingStartPage,dedupStrategy:e.dedupStrategy}},l=o(function(e){return e.logsResult},function(e){return e.hiddenLogLevels},function(e){return e.dedupStrategy},function(e,t,n){if(!e)return null;var a=Object(s.h)(e,new Set(t));return Object(s.g)(a,n)})},1497:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n.n(r),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={elapsed:0},t.tick=function(){var e=Date.now()-t.offset;t.setState({elapsed:e})},t}return a.c(t,e),t.prototype.start=function(){this.offset=Date.now(),this.timer=window.setInterval(this.tick,150)},t.prototype.componentWillReceiveProps=function(e){e.time?clearInterval(this.timer):this.props.time&&this.start()},t.prototype.componentDidMount=function(){this.start()},t.prototype.componentWillUnmount=function(){clearInterval(this.timer)},t.prototype.render=function(){var e=this.state.elapsed,t=this.props,n=t.className,a=(t.time||e)/1e3;return o.a.createElement("span",{className:"elapsed-time "+n},a.toFixed(1),"s")},t}(r.PureComponent);var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.transaction,t=e.done?"query-transaction":"query-transaction query-transaction--loading";return o.a.createElement("div",{className:t},o.a.createElement("div",{className:"query-transaction__type"},e.resultType,":"),o.a.createElement("div",{className:"query-transaction__duration"},e.done?(e.latency/1e3).toFixed(1)+"s":o.a.createElement(s,null)))},t}(r.PureComponent),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.render=function(){var e=this.props.transactions;return o.a.createElement("div",{className:"query-transactions"},e.map(function(e,t){return o.a.createElement(i,{key:e.rowIndex+":"+e.resultType,transaction:e})}))},t}(r.PureComponent);t.a=l},1498:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"Wrapper",function(){return m});var a=n(1),r=n(0),o=n.n(r),s=n(39),i=n(24),l=n(83),c=n(1483),u=n(1485),p=n(4),d=n(41),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.c(t,e),t.prototype.componentWillUnmount=function(){this.props.resetExploreAction()},t.prototype.render=function(){var e=this.props.split;return o.a.createElement("div",{className:"page-scrollbar-wrapper"},o.a.createElement(p.CustomScrollbar,{autoHeightMin:"100%",className:"custom-scrollbar--page"},o.a.createElement("div",{className:"explore-wrapper"},o.a.createElement(c.a,null,o.a.createElement(u.a,{exploreId:l.a.left})),e&&o.a.createElement(c.a,null,o.a.createElement(u.a,{exploreId:l.a.right})))))},t}(r.Component),h={resetExploreAction:d.s};t.default=Object(s.hot)(e)(Object(i.b)(function(e){return{split:e.explore.split}},h)(m))}.call(this,n(77)(e))}}]);
//# sourceMappingURL=explore.e7f4da0898a00c92f24e.js.map